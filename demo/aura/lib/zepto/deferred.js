// Generated by CoffeeScript 1.3.1
/*
Simply Deferred - v.1.1.4
(c) 2012 Sudhir Jonathan, contact.me@sudhirjonathan.com, MIT Licensed.
Portions of this code are inspired and borrowed from Underscore.js (http://underscorejs.org/) (MIT License)
*/
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h=[].slice;t="pending",r="resolved",n="rejected",u=function(e,t){return e!=null?e.hasOwnProperty(t):void 0},f=function(e){return u(e,"length")&&u(e,"callee")},o=function(e){return f(e)?o(Array.prototype.slice.call(e)):Array.isArray(e)?e.reduce(function(e,t){return Array.isArray(t)?e.concat(o(t)):(e.push(t),e)},[]):[e]},i=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},l=function(e,t){return function(){var n;return n=[e].concat(Array.prototype.slice.call(arguments,0)),t.apply(this,n)}},s=function(e,t){var n,r,i,s,u;s=o(e),u=[];for(r=0,i=s.length;r<i;r++)n=s[r],u.push(n.apply(null,t));return u},e=function(){var e,i,u,a,f,l;return l=t,a=[],f=[],e=[],u={},this.promise=function(i){var c;return i=i||{},i.state=function(){return l},c=function(e,n){return function(){return l===t&&n.push.apply(n,o(arguments)),e()&&s(arguments,u),i}},i.done=c(function(){return l===r},a),i.fail=c(function(){return l===n},f),i.always=c(function(){return l!==t},e),i},this.promise(this),i=function(n,r){return function(){return l===t&&(l=n,u=arguments,s([r,e],u)),this}},this.resolve=i(r,a),this.reject=i(n,f),this},c=function(){var t,n,r,s,u,a;s=new e,n=o(arguments),r=i(n.length,s.resolve);for(u=0,a=n.length;u<a;u++)t=n[u],t.done(r);return s.promise()},a=function(t){return t.Deferred=function(){return new e},t.ajax=l(t.ajax,function(t,n){var r,i;return n==null&&(n={}),i=new e,r=function(e,t){return l(e,function(){var e,n;return n=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],n&&n.apply(null,e),t.apply(null,e)})},n.success=r(n.success,i.resolve),n.error=r(n.error,i.reject),t(n),i.promise()}),t.when=c},typeof exports!="undefined"?(exports.Deferred=function(){return new e},exports.when=c,exports.installInto=a):(this.Deferred=function(){return new e},this.Deferred.when=c,this.Deferred.installInto=a)}).call(this);