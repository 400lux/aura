define(["sandbox","text!../templates/todos.html","i18n!../../../nls/todos"],function(e,t,n){"use strict";return e.mvc.View({tagName:"li",template:e.template.parse(t),events:{"click .toggle":"toggleCompleted","dblclick .view":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.input=this.$(".edit"),this},toggleCompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.input.focus()},close:function(){var e=this.input.val();e||this.clear(),this.model.save({title:e}),this.$el.removeClass("editing")},updateOnEnter:function(e){e.keyCode===13&&this.close()},clear:function(){this.model.clear()}})});